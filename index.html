<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Grammar Test</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root { --tg-theme-button-color: #0088cc; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; padding: 15px; background: #f0f2f5; color: #333; line-height: 1.6; }
        .container { max-width: 700px; margin: auto; background: white; padding: 25px; border-radius: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.08); }
        .header { text-align: center; border-bottom: 2px solid #eee; margin-bottom: 25px; padding-bottom: 10px; }
        .section-title { background: #0088cc; color: white; padding: 8px 15px; border-radius: 8px; margin: 30px 0 15px 0; font-size: 1.1em; }
        .question { margin-bottom: 25px; }
        .q-text { font-weight: 600; margin-bottom: 12px; display: block; }
        .options label { display: block; margin: 10px 0; cursor: pointer; padding: 12px; border: 1px solid #e0e0e0; border-radius: 10px; transition: 0.2s; }
        .options label:hover { background: #f8faff; border-color: #0088cc; }
        .options input { margin-right: 12px; transform: scale(1.2); }
        .btn-submit { width: 100%; padding: 18px; background: #0088cc; color: white; border: none; border-radius: 12px; font-size: 18px; font-weight: bold; cursor: pointer; margin-top: 20px; box-shadow: 0 4px 10px rgba(0,136,204,0.3); }
        .btn-submit:active { transform: translateY(2px); box-shadow: none; }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h2>ENGLISH GRAMMAR TEST</h2>
        <p>Time Allowed: 50 minutes | Total: 50 Questions</p>
    </div>

    <div class="section-title">PART 1: GRAMMAR & STRUCTURE</div>
    <div id="grammar-questions"></div>

    <button class="btn-submit" onclick="calculateResult()">Testni Yakunlash</button>
</div>

<script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    // 50 TA SAVOL UCHUN BAZA
    // Javoblar: A=0, B=1, C=2, D=3
    const questions = [
        // Q1-15 (Beginner)
        { q: "1. Hello! I ______ from Uzbekistan.", a: ["is", "am", "are", "be"], c: 1 },
        { q: "2. Look at ______ birds in the sky.", a: ["this", "that", "these", "those"], c: 3 },
        { q: "3. My sister ______ tea every morning.", a: ["drink", "drinks", "is drinking", "drinking"], c: 1 },
        { q: "4. There aren't ______ pictures on the wall.", a: ["some", "a", "any", "the"], c: 2 },
        { q: "5. ______ you swim? Yes, I can.", a: ["Are", "Do", "Can", "Does"], c: 2 },
        { q: "6. My father is a doctor. This is ______ car.", a: ["his", "her", "he", "him"], c: 0 },
        { q: "7. Where ______ they going now?", a: ["do", "is", "are", "does"], c: 2 },
        { q: "8. We have lunch ______ 1:00 PM.", a: ["on", "at", "in", "to"], c: 1 },
        { q: "9. ______ brother is tall and handsome.", a: ["Sarah is", "Sarah's", "Sarahs'", "Sarah"], c: 1 },
        { q: "10. Please, ______ the door.", a: ["close", "to close", "closing", "closes"], c: 0 },
        { q: "11. Yesterday, I ______ at home.", a: ["am", "was", "were", "did"], c: 1 },
        { q: "12. How ______ apples are there on the table?", a: ["much", "many", "any", "a lot"], c: 1 },
        { q: "13. He ______ like playing football.", a: ["don't", "isn't", "doesn't", "not"], c: 2 },
        { q: "14. What ______ you do last Sunday?", a: ["were", "did", "are", "had"], c: 1 },
        { q: "15. My house is ______ than yours.", a: ["big", "bigger", "biggest", "more big"], c: 1 },

        // Q16-30 (Elementary)
        { q: "16. I ______ never seen a ghost.", a: ["did", "have", "was", "has"], c: 1 },
        { q: "17. If it rains tomorrow, we ______ go to the park.", a: ["don't", "won't", "didn't", "haven't"], c: 1 },
        { q: "18. While I ______ TV, the lights went out.", a: ["watched", "watch", "was watching", "am watching"], c: 2 },
        { q: "19. You ______ wear a uniform at school. It is a rule.", a: ["must", "can", "may", "might"], c: 0 },
        { q: "20. This is the restaurant ______ we met last year.", a: ["which", "who", "where", "that"], c: 2 },
        { q: "21. She is going ______ a new dress for the party.", a: ["buy", "to buy", "buying", "bought"], c: 1 },
        { q: "22. I haven't finished my homework ______.", a: ["just", "already", "yet", "since"], c: 2 },
        { q: "23. This book is ______ interesting than the film.", a: ["as", "more", "most", "so"], c: 1 },
        { q: "24. Someone ______ my wallet yesterday!", a: ["steal", "stole", "stolen", "was stealing"], c: 1 },
        { q: "25. I am interested ______ learning history.", a: ["on", "at", "in", "with"], c: 2 },
        { q: "26. He is the ______ student in the class.", a: ["good", "better", "best", "goodest"], c: 2 },
        { q: "27. ______ you help me carry this bag, please?", a: ["Should", "Must", "Could", "Do"], c: 2 },
        { q: "28. They have lived in this house ______ 2010.", a: ["for", "since", "from", "ago"], c: 1 },
        { q: "29. I was cooking dinner when my husband ______ .", a: ["arrive", "arrived", "was arriving", "has arrived"], c: 1 },
        { q: "30. There is ______ milk left in the fridge.", a: ["a few", "many", "a little", "any"], c: 2 },

        // Q31-40 (Pre-Intermediate)
        { q: "31. The letter ______ by the secretary right now.", a: ["is written", "is being written", "wrote", "writes"], c: 1 },
        { q: "32. If I ______ you, I would study harder.", a: ["am", "was", "were", "be"], c: 2 },
        { q: "33. He asked me where ______ .", a: ["did I live", "do I live", "I lived", "I live"], c: 2 },
        { q: "34. I regret ______ you that you did not pass the interview.", a: ["tell", "to tell", "telling", "told"], c: 1 },
        { q: "35. By the time we arrived, the train ______ already left.", a: ["has", "had", "was", "did"], c: 1 },
        { q: "36. I am not used to ______ on the left side of the road.", a: ["drive", "driving", "drove", "be driven"], c: 1 },
        { q: "37. Youâ€™d better ______ a doctor before it gets worse.", a: ["see", "to see", "seeing", "saw"], c: 0 },
        { q: "38. The man ______ car was stolen is my neighbor.", a: ["who", "whom", "whose", "which"], c: 2 },
        { q: "39. ______ the heavy rain, they played the match.", a: ["Although", "Despite", "However", "Even"], c: 1 },
        { q: "40. I wish I ______ that yesterday.", a: ["didn't say", "hadn't said", "haven't said", "wouldn't say"], c: 1 },

        // Q41-50 (Intermediate)
        { q: "41. It is high time we ______ home.", a: ["go", "went", "have gone", "had gone"], c: 1 },
        { q: "42. The thief is believed ______ escaping to another country.", a: ["to be", "being", "that he is", "to"], c: 0 },
        { q: "43. We had our house ______ last month.", a: ["paint", "painting", "painted", "to paint"], c: 2 },
        { q: "44. Unless you ______ hard, you will fail the exam.", a: ["study", "don't study", "will study", "didn't study"], c: 0 },
        { q: "45. He gave ______ smoking last year.", a: ["in", "up", "off", "out"], c: 1 },
        { q: "46. If I ______ known you were coming, I would have baked a cake.", a: ["have", "had", "would have", "was"], c: 1 },
        { q: "47. The car ______ by the time we arrived.", a: ["has been sold", "had been sold", "was sold", "is sold"], c: 1 },
        { q: "48. She said that she ______ to Paris the following week.", a: ["will go", "is going", "would go", "went"], c: 2 },
        { q: "49. It is important that he ______ on time.", a: ["be", "is", "are", "will be"], c: 0 },
        { q: "50. I would rather you ______ not smoke here.", a: ["do", "did", "will", "would"], c: 1 }
    ];

    function renderQuestions() {
        const grammarDiv = document.getElementById('grammar-questions');

        questions.forEach((item, i) => {
            let html = `<div class="question"><span class="q-text">${item.q}</span><div class="options">`;
            item.a.forEach((opt, index) => {
                html += `<label><input type="radio" name="q${i}" value="${index}"> ${opt}</label>`;
            });
            html += `</div></div>`;
            grammarDiv.innerHTML += html;
        });
    }

    function calculateResult() {
        let score = 0;
        questions.forEach((item, i) => {
            const selected = document.querySelector(`input[name="q${i}"]:checked`);
            if (selected && parseInt(selected.value) === item.c) {
                score++;
            }
        });
        
        // Botga 50 ta savol natijasi yuboriladi
        tg.sendData(JSON.stringify({
            score: score,
            total: 50
        }));
    }

    renderQuestions();
</script>
</body>
</html>
